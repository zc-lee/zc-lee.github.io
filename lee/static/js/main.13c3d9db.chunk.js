(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,a){t.exports=a.p+"static/media/re_loading.c42c5205.png"},101:function(t,e,a){t.exports=a.p+"static/media/stop.296a4a53.png"},128:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(14),o=(a(95),a(21)),r=a(22),c=a(24),l=a(23),u=a(25),h=a(63),p=a(9),f=a(132),d=a(133),m=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={},a}return Object(u.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"ssr-show"},s.a.createElement("h1",null,"ssr test"))}}]),e}(s.a.Component),g=a(76),v=(a(96),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).onSelectFile=function(t){if(t.target.files&&t.target.files.length>0){var e=new FileReader;e.addEventListener("load",function(){return a.setState({src:e.result})}),console.log(e.result),e.readAsDataURL(t.target.files[0])}},a.state={src:"https://gss0.baidu.com/70cFfyinKgQFm2e88IuM_a/forum/w=580/sign=3b900475252eb938ec6d7afae56385fe/61954b10b912c8fcacb9f159f6039245d78821fd.jpg",newSrc:null,height:400},a}return Object(u.a)(e,t),Object(r.a)(e,[{key:"_crop",value:function(){var t=this.cropper.getCroppedCanvas({fillColor:"#fff",imageSmoothingQuality:"high"}).toDataURL();this.setState({newSrc:t})}},{key:"throttle",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.timer||(this.timer=setTimeout(function(){t(),e.timer=null},a))}},{key:"onCropperInit",value:function(t){this.cropper=t}},{key:"render",value:function(){var t=this.state.height;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("input",{type:"file",onChange:this.onSelectFile})),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(g.a,{src:this.state.src,style:{width:"500px",height:t+"px"},initialAspectRatio:1,dragMode:"crop",viewMode:0,background:!0,guides:!0,crop:this._crop.bind(this),onInitialized:this.onCropperInit.bind(this)}),s.a.createElement("img",{id:"preview",style:{height:t+"px",display:"inline-block",marginLeft:"20px"},src:this.state.newSrc,alt:""})))}}]),e}(n.Component)),b=(a(97),a(98)),M=a(99),y=a(100),E=a(101),S=0,w=1,j=2,k=[{ico:b,text:"\u5339\u914d\u6210\u529f"},{ico:M,text:"\u5339\u914d\u5931\u8d25"}];function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=[[0,0,0,0],[0,0,0,1],[0,0,1,0],[0,0,1,1],[0,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,1,1],[1,0,0,0],[1,0,0,1],[1,0,1,0],[1,0,1,1],[1,1,0,0],[1,1,0,1],[1,1,1,0],[1,1,1,1]][arguments.length>2&&void 0!==arguments[2]?arguments[2]:0],n=.1*e;t.save(),t.beginPath(),t.moveTo(n,n),t.lineTo(n,.5*e-n),t.arc(n,.5*e,n,1.5*Math.PI,.5*Math.PI,a[0]),t.lineTo(n,e-n),t.lineTo(.5*e-n,e-n),t.arc(.5*e,e-n,n,Math.PI,0,a[1]),t.lineTo(e-n,e-n),t.lineTo(e-n,.5*e+n),t.arc(e-n,.5*e,n,.5*Math.PI,1.5*Math.PI,a[2]),t.lineTo(e-n,n),t.lineTo(.5*e+n,n),t.arc(.5*e,n,n,0,Math.PI,a[3]),t.lineTo(n,n),t.clip(),t.closePath()}var O=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).renderImage=function(){a.setState({status:S});var t=new Image;t.addEventListener("load",function(){var e=a.props,n=e.imageWidth,s=e.imageHeight,i=e.fragmentSize,o=a.refs.shadowCanvas.getContext("2d"),r=a.refs.fragmentCanvas.getContext("2d"),c=Math.floor(16*Math.random());x(o,i,c),x(r,i,c);var l=Math.floor(i+(n-2*i)*Math.random()),u=Math.floor((s-i)*Math.random());r.drawImage(t,l,u,i,i,0,0,i,i),o.fillStyle="rgba(0, 0, 0, 0.5)",o.fill(),o.restore(),r.restore(),a.setState({offsetX:l,offsetY:u}),a.setState({status:w})}),t.src=a.props.imageUrl},a.onShowTips=function(){if(!a.state.showTips){var t=a.state.status===j?0:1;a.setState({showTips:!0,tipsIndex:t});var e=setTimeout(function(){a.setState({showTips:!1}),clearTimeout(e)},2e3)}},a.state={isMovable:!1,offsetX:0,offsetY:0,startX:0,oldX:0,currX:0,status:S,showTips:!1,tipsIndex:0},a}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.renderImage()}},{key:"componentDidUpdate",value:function(t){this.props.imageUrl&&t.imageUrl!==this.props.imageUrl&&this.renderImage()}},{key:"onMoveStart",value:function(t){this.state.status===w&&this.setState({isMovable:!0,startX:t.clientX})}},{key:"onMoving",value:function(t){if(this.state.status===w&&this.state.isMovable){var e=t.clientX-this.state.startX,a=this.state.oldX+e,n=this.props.imageWidth-this.props.fragmentSize;a=a<0?0:a>n?n:a,this.setState({currX:a})}}},{key:"onMoveEnd",value:function(){var t=this;this.state.status===w&&this.state.isMovable&&(this.setState(function(t){return{isMovable:!1,oldX:t.currX}}),Math.abs(this.state.currX-this.state.offsetX)<5?(this.setState(function(t){return{status:j,currX:t.offsetX}},this.onShowTips),this.props.onMatch()):(this.setState({status:3},function(){t.onReset(),t.onShowTips()}),this.props.onError()))}},{key:"onReset",value:function(){var t=this,e=setTimeout(function(){t.setState({oldX:0,currX:0,status:w}),clearTimeout(e)},1e3)}},{key:"onReload",value:function(){if(this.state.status===w||this.state.status===j){var t=this.refs.shadowCanvas.getContext("2d"),e=this.refs.fragmentCanvas.getContext("2d");t.clearRect(0,0,this.props.fragmentSize,this.props.fragmentSize),e.clearRect(0,0,this.props.fragmentSize,this.props.fragmentSize),this.setState({isMovable:!1,offsetX:0,offsetY:0,startX:0,oldX:0,currX:0,status:S},this.props.onReload)}}},{key:"render",value:function(){var t=this.props,e=t.imageUrl,a=t.imageWidth,n=t.imageHeight,i=t.fragmentSize,o=this.state,r=o.offsetX,c=o.offsetY,l=o.currX,u=o.showTips,h=o.tipsIndex,p=k[h];return s.a.createElement("div",{className:"image-code",style:{width:a}},s.a.createElement("div",{className:"image-container",style:{height:n,backgroundImage:'url("'.concat(e,'")')}},s.a.createElement("canvas",{ref:"shadowCanvas",className:"canvas",width:i,height:i,style:{left:r+"px",top:c+"px"}}),s.a.createElement("canvas",{ref:"fragmentCanvas",className:"canvas",width:i,height:i,style:{top:c+"px",left:l+"px"}}),s.a.createElement("div",{className:u?"tips-container--active":"tips-container"},s.a.createElement("i",{className:"tips-ico",style:{backgroundImage:'url("'.concat(p.ico,'")')}}),s.a.createElement("span",{className:"tips-text"},p.text))),s.a.createElement("div",{className:"reload-container"},s.a.createElement("div",{className:"reload-wrapper",onClick:this.onReload.bind(this)},s.a.createElement("i",{className:"reload-ico",style:{backgroundImage:'url("'.concat(y,'")')}}),s.a.createElement("span",{className:"reload-tips"},"\u5237\u65b0\u9a8c\u8bc1"))),s.a.createElement("div",{className:"slider-wrpper",onMouseMove:this.onMoving.bind(this),onMouseLeave:this.onMoveEnd.bind(this)},s.a.createElement("div",{className:"slider-bar"},"\u6309\u4f4f\u6ed1\u5757\uff0c\u62d6\u52a8\u5b8c\u6210\u62fc\u56fe"),s.a.createElement("div",{className:"slider-button",onMouseDown:this.onMoveStart.bind(this),onMouseUp:this.onMoveEnd.bind(this),style:{left:l+"px",backgroundImage:'url("'.concat(E,'")')}})))}}]),e}(s.a.Component);O.defaultProps={imageUrl:"",imageWidth:500,imageHeight:300,fragmentSize:80,onReload:function(){},onMatch:function(){},onError:function(){}};var I=O;function X(){var t=["https://gss0.baidu.com/70cFfyinKgQFm2e88IuM_a/forum/w=580/sign=3b900475252eb938ec6d7afae56385fe/61954b10b912c8fcacb9f159f6039245d78821fd.jpg","https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=991571279,1492844361&fm=26&gp=0.jpg","https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=4227342398,2949207363&fm=26&gp=0.jpg"],e=Math.random();return t[Math.floor(e*t.length)]+"?"+Math.random()}var C=[{title:"App",path:"/",component:m},{title:"\u88c1\u526a",path:"/reactCropper",component:v},{title:"\u62fc\u56fe\u9a8c\u8bc1",path:"/loginValid",component:function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(s)))).state={url:""},a.onReload=function(){a.setState({url:X()})},a}return Object(u.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.setState({url:X()})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(I,{imageUrl:this.state.url,onReload:this.onReload.bind(this),onMatch:function(){console.log("code is match")}}))}}]),e}(n.Component)}],T=f.a.Sider,R=f.a.Content,N=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).toggle=function(){a.setState({collapsed:!a.state.collapsed})},a.state={collapsed:!1,menus:C,currentMenu:"0",routes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function e(t){return"/"===t.path}if(!t.some(function(t){return e(t)}))return console.warn("Don`t have route who path === '/'");if(t.findIndex(function(t){return e(t)})===t.length-1)return void console.warn("Route`s index already in last who path === '/'");var a=null;return(t=t.filter(function(t){return e(t)&&(a=t),!e(t)})).push(a),t}(C)},a}return Object(u.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return s.a.createElement(h.a,null,s.a.createElement(f.a,{style:{height:"100%"}},s.a.createElement(f.a,null,s.a.createElement(T,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},s.a.createElement(d.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[this.state.currentMenu]},this.state.menus.map(function(t,e){return s.a.createElement(d.a.Item,{key:e},s.a.createElement(h.b,{to:t.path},t.title))}))),s.a.createElement(R,null,s.a.createElement(p.c,null,this.state.routes.map(function(t,e){return s.a.createElement(p.a,Object.assign({key:e},t))}))))))}}]),e}(n.Component);Object(i.render)(s.a.createElement(N,null),document.getElementById("root"))},90:function(t,e,a){t.exports=a(128)},95:function(t,e,a){},97:function(t,e,a){},98:function(t,e,a){t.exports=a.p+"static/media/success.9299ba7c.png"},99:function(t,e,a){t.exports=a.p+"static/media/fail.43af1c05.png"}},[[90,1,2]]]);
//# sourceMappingURL=main.13c3d9db.chunk.js.map